{"version":3,"sources":["services/galleryApi.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.styled.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.styled.jsx","App.jsx","index.js"],"names":["MY_KEY","BASE_URL","galleryApi","fetchGalleryWithQuery","searchQuery","numberPage","axios","get","then","response","data","hits","Searchbar","onSubmit","className","e","preventDefault","inputValue","target","elements","SearchInput","value","type","name","autoComplete","autoFocus","placeholder","ImageGalleryItem","handleClick","alt","image","webformatURL","largeImageURL","src","onClick","ImageGallery","imagesList","map","id","GalleryButton","styled","button","Button","modalRoot","document","querySelector","Modal","handleKeyDown","props","closeModal","window","addEventListener","this","removeEventListener","url","createPortal","Component","WrapperLoader","div","App","state","showModal","imgUrl","requestStatus","handleSubmit","trim","alert","setState","handleSearch","imagesData","handleSearchData","length","images","prevState","handleScroll","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","currentTarget","code","handleClickImages","_","color","height","width","ReactDOM","render","StrictMode","getElementById"],"mappings":"oSAEMA,EAAS,qCACTC,EAAW,2BAeFC,EAJI,CACjBC,sBAT4B,SAACC,GAAiC,IAApBC,EAAmB,uDAAN,EACvD,OAAOC,IACJC,IADI,UAEAN,EAFA,cAEcG,EAFd,iBAEkCC,EAFlC,gBAEoDL,EAFpD,6DAHQ,KAOZQ,MAAK,SAACC,GAAD,OAAcA,EAASC,KAAKC,U,OCX/B,SAASC,EAAT,GAAkC,IAAbC,EAAY,EAAZA,SAO1B,OACE,wBAAQC,UAAU,YAAlB,SACE,uBAAMA,UAAU,aAAaD,SARb,SAAAE,GAClBA,EAAEC,iBACF,IAAMC,EAAaF,EAAEG,OAAOC,SAASC,YAAYC,MACjDR,EAASI,IAKP,UACE,wBAAQK,KAAK,SAASR,UAAU,oBAAhC,SACE,sBAAMA,UAAU,0BAAhB,sBAGF,uBACEA,UAAU,mBACVS,KAAK,cACLD,KAAK,OACLE,aAAa,MACbC,WAAS,EACTC,YAAY,kCCpBf,SAASC,EAAT,GAIH,IAHFC,EAGC,EAHDA,YACAC,EAEC,EAFDA,IAEC,IADDC,MAASC,EACR,EADQA,aAAcC,EACtB,EADsBA,cAEvB,OACE,oBAAIlB,UAAU,mBAAd,SACE,qBACEmB,IAAKF,EACLF,IAAKA,EACLf,UAAU,yBACVoB,QAAS,SAAAnB,GAAC,OAAIa,EAAYb,EAAGiB,QCT9B,SAASG,EAAT,GAAyD,IAAjCC,EAAgC,EAAhCA,WAAYP,EAAoB,EAApBA,IAAKD,EAAe,EAAfA,YAC9C,OACE,oBAAId,UAAU,eAAd,SACGsB,EAAWC,KAAI,SAAAP,GAAK,OACnB,cAACH,EAAD,CAEEG,MAAOA,EACPD,IAAKA,EACLD,YAAaA,GAHRE,EAAMQ,S,oBCLRC,EAAgBC,IAAOC,OAAV,mnBCAnB,SAASC,EAAT,GAA8B,IAAZR,EAAW,EAAXA,QACvB,OACE,cAACK,EAAD,CAAejB,KAAK,SAASY,QAASA,EAAtC,uBCDJ,I,EAAMS,EAAYC,SAASC,cAAc,eAE5BC,EAAb,4MASEC,cAAgB,SAAAhC,GACd,EAAKiC,MAAMC,WAAWlC,IAV1B,uDACE,WACEmC,OAAOC,iBAAiB,UAAWC,KAAKL,iBAF5C,kCAKE,WACEG,OAAOG,oBAAoB,UAAWD,KAAKL,iBAN/C,oBAaE,WACE,MAAiCK,KAAKJ,MAA9BnB,EAAR,EAAQA,IAAKyB,EAAb,EAAaA,IAAKL,EAAlB,EAAkBA,WAClB,OAAOM,uBACL,qBAAKzC,UAAU,UAAUoB,QAASe,EAAlC,SACE,qBAAKnC,UAAU,QAAf,SACE,qBAAKmB,IAAKqB,EAAKzB,IAAKA,QAGxBc,OArBN,GAA2Ba,aCHdC,EAAgBjB,IAAOkB,IAAV,0EC8HXC,EApHf,4MACEC,MAAQ,CACNxB,WAAY,GACZhC,YAAa,GACbC,WAAY,EACZwD,UAAW,KACXC,OAAQ,GACRC,cAAe,QAPnB,EA0BEC,aAAe,SAAA5D,GACc,KAAvBA,EAAY6D,OAIhBC,MAAM,yFAHJ,EAAKC,SAAS,CAAE/D,iBA5BtB,EAkCEgE,aAAe,WACb,MAAoC,EAAKR,MAAjCxD,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,WACrB,EAAK8D,SAAS,CAAEJ,cAAe,YAE/B7D,EACGC,sBAAsBC,EAAaC,GACnCG,MAAK,SAAA6D,GAAU,OAAI,EAAKC,iBAAiBD,OAxChD,EA2CEC,iBAAmB,SAAA5D,GACjB,IAAQL,EAAe,EAAKuD,MAApBvD,WAER,GAAoB,IAAhBK,EAAK6D,QAA+B,IAAflE,EAGvB,OAFA6D,MAAM,qGACN,EAAKC,SAAS,CAAEJ,cAAe,SAIjC,GAAoB,IAAhBrD,EAAK6D,QAAgBlE,EAAa,EAGpC,OAFA6D,MAAM,iHACN,EAAKC,SAAS,CAAEJ,cAAe,SAIjC,IAAMS,EAAS9D,EAAK2B,KAAI,kBAA0C,CAChEC,GADsB,EAAGA,GAEzBP,aAFsB,EAAOA,aAG7BC,cAHsB,EAAqBA,kBAM7C,EAAKmC,UAAS,SAAAM,GAAS,MAAK,CAC1BrC,WAAW,GAAD,mBAAMqC,EAAUrC,YAAhB,YAA+BoC,IACzCnE,WAAYoE,EAAUpE,WAAa,EACnC0D,cAAe,gBAnErB,EAuEEW,aAAe,WACbxB,OAAOyB,SAAS,CACdC,IAAKhC,SAASiC,gBAAgBC,aAC9BC,SAAU,YA1EhB,EA8EEC,YAAc,SAAAjE,GACRA,EAAEG,SAAWH,EAAEkE,eAA4B,WAAXlE,EAAEmE,MACpC,EAAKf,UAAS,kBAAoB,CAAEN,WAAtB,EAAGA,eAhFvB,EAoFEsB,kBAAoB,SAACpE,EAAGuC,GACtB,EAAKa,SAAS,CAAEL,OAAQR,IACxB,EAAK0B,YAAYjE,IAtFrB,wDAWE,SAAmBqE,EAAGX,GACpB,MAAoCrB,KAAKQ,MAAjCxD,EAAR,EAAQA,YAAagC,EAArB,EAAqBA,WAEjBqC,EAAUrE,cAAgBA,IAC5BgD,KAAKe,SAAS,CAAE/B,WAAY,GAAI/B,WAAY,IAC5C+C,KAAKgB,gBAGLK,EAAUrC,aAAeA,GACO,IAAhCqC,EAAUrC,WAAWmC,QAErBnB,KAAKsB,iBAtBX,oBAyFE,WACE,MACEtB,KAAKQ,MADCxB,EAAR,EAAQA,WAAYhC,EAApB,EAAoBA,YAAa2D,EAAjC,EAAiCA,cAAeF,EAAhD,EAAgDA,UAAWC,EAA3D,EAA2DA,OAE3D,OACE,qCACE,cAAClD,EAAD,CAAWC,SAAUuC,KAAKY,eACzB5B,EAAWmC,OAAS,GACnB,cAACpC,EAAD,CACEC,WAAYA,EACZP,IAAKzB,EACLwB,YAAawB,KAAK+B,oBAGH,YAAlBpB,GACC,cAACN,EAAD,UACE,cAAC,IAAD,CAAQnC,KAAK,YAAY+D,MAAM,UAAUC,OAAQ,IAAKC,MAAO,QAG9C,aAAlBxB,GAAgC,cAACrB,EAAD,CAAQR,QAASkB,KAAKgB,eACtDP,GACC,cAAC,EAAD,CAAOhC,IAAKzB,EAAakD,IAAKQ,EAAQb,WAAYG,KAAK4B,qBA7GjE,GAAyBxB,aCPzBgC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF9C,SAAS+C,eAAe,W","file":"static/js/main.d3d15bc3.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst MY_KEY = '20832523-2bf34066ca306390d6c2fd3bb';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nconst per_page = 12;\r\n\r\nconst fetchGalleryWithQuery = (searchQuery, numberPage = 1) => {\r\n  return axios\r\n    .get(\r\n      `${BASE_URL}?q=${searchQuery}&page=${numberPage}&key=${MY_KEY}&image_type=photo&orientation=horizontal&per_page=${per_page}`\r\n    )\r\n    .then((response) => response.data.hits);\r\n};\r\n\r\nconst galleryApi = {\r\n  fetchGalleryWithQuery,\r\n};\r\n\r\nexport default galleryApi;\r\n","export function Searchbar({ onSubmit }) {\r\n  const inputSubmit = e => {\r\n    e.preventDefault();\r\n    const inputValue = e.target.elements.SearchInput.value;\r\n    onSubmit(inputValue);\r\n  };\r\n\r\n  return (\r\n    <header className=\"Searchbar\">\r\n      <form className=\"SearchForm\" onSubmit={inputSubmit}>\r\n        <button type=\"submit\" className=\"SearchForm-button\">\r\n          <span className=\"SearchForm-button-label\">Search</span>\r\n        </button>\r\n\r\n        <input\r\n          className=\"SearchForm-input\"\r\n          name=\"SearchInput\"\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n","export function ImageGalleryItem({\r\n  handleClick,\r\n  alt,\r\n  image: { webformatURL, largeImageURL },\r\n}) {\r\n  return (\r\n    <li className=\"ImageGalleryItem\">\r\n      <img\r\n        src={webformatURL}\r\n        alt={alt}\r\n        className=\"ImageGalleryItem-image\"\r\n        onClick={e => handleClick(e, largeImageURL)}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n","import { ImageGalleryItem } from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nexport function ImageGallery({ imagesList, alt, handleClick }) {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {imagesList.map(image => (\r\n        <ImageGalleryItem\r\n          key={image.id}\r\n          image={image}\r\n          alt={alt}\r\n          handleClick={handleClick}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n","import styled from '@emotion/styled';\r\n\r\nexport const GalleryButton = styled.button`\r\n  margin: 0 auto 20px;\r\n  padding: 8px 16px;\r\n  border-radius: 2px;\r\n  background-color: #3f51b5;\r\n  transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);\r\n  text-align: center;\r\n  display: block;\r\n  color: #fff;\r\n  border: 0;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  font-family: inherit;\r\n  font-size: 18px;\r\n  line-height: 24px;\r\n  font-style: normal;\r\n  font-weight: 500;\r\n  min-width: 180px;\r\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2),\r\n    0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\r\n\r\n  &:hover,\r\n  &:focus {\r\n    background-color: #303f9f;\r\n  }\r\n`;\r\n","import { GalleryButton } from './Button.styled';\r\n\r\nexport function Button({ onClick }) {\r\n  return (\r\n    <GalleryButton type=\"button\" onClick={onClick}>\r\n      Load more\r\n    </GalleryButton>\r\n  );\r\n}\r\n","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    this.props.closeModal(e);\r\n  };\r\n\r\n  render() {\r\n    const { alt, url, closeModal } = this.props;\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={closeModal}>\r\n        <div className=\"Modal\">\r\n          <img src={url} alt={alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n","import styled from '@emotion/styled';\r\n\r\nexport const WrapperLoader = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n","import Loader from 'react-loader-spinner';\r\n\r\nimport { Component } from 'react';\r\nimport galleryApi from './services/galleryApi';\r\n\r\nimport { Searchbar } from './components/Searchbar/Searchbar';\r\nimport { ImageGallery } from './components/ImageGallery/ImageGallery';\r\nimport { Button } from './components/Button/Button';\r\nimport { Modal } from './components/Modal/Modal';\r\n\r\nimport { WrapperLoader } from './App.styled';\r\n\r\nexport class App extends Component {\r\n  state = {\r\n    imagesList: [],\r\n    searchQuery: '',\r\n    numberPage: 1,\r\n    showModal: null,\r\n    imgUrl: '',\r\n    requestStatus: 'idle',\r\n    // idle, pending, resolved, rejected,\r\n  };\r\n\r\n  componentDidUpdate(_, prevState) {\r\n    const { searchQuery, imagesList } = this.state;\r\n\r\n    if (prevState.searchQuery !== searchQuery) {\r\n      this.setState({ imagesList: [], numberPage: 1 });\r\n      this.handleSearch();\r\n    }\r\n    if (\r\n      prevState.imagesList !== imagesList &&\r\n      prevState.imagesList.length !== 0\r\n    ) {\r\n      this.handleScroll();\r\n    }\r\n  }\r\n\r\n  handleSubmit = searchQuery => {\r\n    if (searchQuery.trim() !== '') {\r\n      this.setState({ searchQuery });\r\n      return;\r\n    }\r\n    alert('Неверный запрос');\r\n  };\r\n\r\n  handleSearch = () => {\r\n    const { searchQuery, numberPage } = this.state;\r\n    this.setState({ requestStatus: 'pending' });\r\n\r\n    galleryApi\r\n      .fetchGalleryWithQuery(searchQuery, numberPage)\r\n      .then(imagesData => this.handleSearchData(imagesData));\r\n  };\r\n\r\n  handleSearchData = data => {\r\n    const { numberPage } = this.state;\r\n\r\n    if (data.length === 0 && numberPage === 1) {\r\n      alert('Ничего не найдено');\r\n      this.setState({ requestStatus: 'idle' });\r\n      return;\r\n    }\r\n\r\n    if (data.length === 0 && numberPage > 1) {\r\n      alert('Картинок больше нет');\r\n      this.setState({ requestStatus: 'idle' });\r\n      return;\r\n    }\r\n\r\n    const images = data.map(({ id, webformatURL, largeImageURL }) => ({\r\n      id,\r\n      webformatURL,\r\n      largeImageURL,\r\n    }));\r\n\r\n    this.setState(prevState => ({\r\n      imagesList: [...prevState.imagesList, ...images],\r\n      numberPage: prevState.numberPage + 1,\r\n      requestStatus: 'resolved',\r\n    }));\r\n  };\r\n\r\n  handleScroll = () => {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  };\r\n\r\n  toggleModal = e => {\r\n    if (e.target === e.currentTarget || e.code === 'Escape') {\r\n      this.setState(({ showModal }) => ({ showModal: !showModal }));\r\n    }\r\n  };\r\n\r\n  handleClickImages = (e, url) => {\r\n    this.setState({ imgUrl: url });\r\n    this.toggleModal(e);\r\n  };\r\n\r\n  render() {\r\n    const { imagesList, searchQuery, requestStatus, showModal, imgUrl } =\r\n      this.state;\r\n    return (\r\n      <>\r\n        <Searchbar onSubmit={this.handleSubmit} />\r\n        {imagesList.length > 0 && (\r\n          <ImageGallery\r\n            imagesList={imagesList}\r\n            alt={searchQuery}\r\n            handleClick={this.handleClickImages}\r\n          />\r\n        )}\r\n        {requestStatus === 'pending' && (\r\n          <WrapperLoader>\r\n            <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={100} width={100} />\r\n          </WrapperLoader>\r\n        )}\r\n        {requestStatus === 'resolved' && <Button onClick={this.handleSearch} />}\r\n        {showModal && (\r\n          <Modal alt={searchQuery} url={imgUrl} closeModal={this.toggleModal} />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}